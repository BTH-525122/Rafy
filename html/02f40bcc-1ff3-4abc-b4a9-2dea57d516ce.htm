<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-zh-CN.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>通用查询条件(CommonQueryCriteria)</title><meta name="Language" content="zh-cn" /><meta name="Microsoft.Help.Id" content="02f40bcc-1ff3-4abc-b4a9-2dea57d516ce" /><meta name="Description" content="注意，本查询方式（基于 CreatePropertyQuery 方法）已经过时，不再可用！！！新的文档正在更新中……" /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Rafy User Guide</div><div class="pageBody"><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn">通用查询条件(CommonQueryCriteria)</td></tr></table><span class="introStyle"></span><div class="introduction"><p>注意，本查询方式（基于 CreatePropertyQuery 方法）已经过时，不再可用！！！新的文档正在更新中……</p><p>本文包含以下章节：</p><ul class="autoOutline"><li class="outlineSectionEntry"><a href="#PropertiesMatchCriteria">使用 PropertiesMatchCriteria 进行精确属性匹配</a></li></ul></div><div class="collapsibleAreaRegion" id="PropertiesMatchCriteria"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />使用 PropertiesMatchCriteria 进行精确属性匹配</span></div><div id="ID1RBSection" class="collapsibleSection"><p>在查询时，我们常常期望对实体的一组属性中的每一个都进行精确匹配，这时可以使用 <span class="code">PropertiesMatchCriteria</span> 类型来快速实现查询。例如，以下查询实现了同时通过编码和名称来查询指定的仓库：</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EACABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">public</span> Warehouse GetByCodeAndName(<span class="highlight-keyword">string</span> warehouseCode, <span class="highlight-keyword">string</span> warehouseName)
{
    <span class="highlight-keyword">return</span> <span class="highlight-keyword">this</span>.FetchFirst(<span class="highlight-keyword">new</span> PropertiesMatchCriteria
    {
        { Warehouse.CodeProperty, warehouseCode },
        { Warehouse.NameProperty, warehouseName },
    });
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACABAAA");</script><p>以上代码，功能上完全等同于下面的查询：</p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAABAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAABAAA_copyCode" href="#" onclick="javascript:CopyToClipboard('ID0EAAABAAA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAABAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">public</span> Warehouse GetByCodeAndName(<span class="highlight-keyword">string</span> warehouseCode, <span class="highlight-keyword">string</span> warehouseName)
{
    <span class="highlight-keyword">return</span> <span class="highlight-keyword">this</span>.FetchFirst(r =&gt; r.DA_GetByCodeAndName(warehouseCode, warehouseName));
}
<span class="highlight-keyword">private</span> EntityList DA_GetByCodeAndName(<span class="highlight-keyword">string</span> warehouseCode, <span class="highlight-keyword">string</span> warehouseName)
{
    IPropertyQuery q = <span class="highlight-keyword">this</span>.CreatePropertyQuery();

    q.Constrain(Warehouse.CodeProperty).Equal(warehouseCode);
    q.And().Constrain(Warehouse.NameProperty).Contains(warehouseName);

    <span class="highlight-keyword">return</span> <span class="highlight-keyword">this</span>.QueryList(q);
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAABAAA");</script></div></div></div><div id="pageFooter" class="pageFooter">有问题请联系 9474649@qq.com。<div class="feedbackLink">有关这个主题的评论请发邮件到
        <a id="HT_MailLink" href="mailto:9474649%40qq.com?Subject=Rafy User Guide">发送反馈</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>